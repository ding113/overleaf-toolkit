# Overleaf All-in-One Container Configuration
# This file contains default environment variables for the Overleaf container
# You can override these by setting environment variables in Dokploy or your deployment system

# ===========================================
# APPLICATION SETTINGS
# ===========================================
OVERLEAF_APP_NAME="Overleaf"
OVERLEAF_PORT=80

# Site configuration  
SHARELATEX_SITE_URL="http://localhost"
SHARELATEX_NAV_TITLE="Overleaf"

# ===========================================
# DATABASE CONFIGURATION
# ===========================================
# MongoDB (automatically configured for internal use)
MONGO_URL="mongodb://127.0.0.1:27017/sharelatex?replicaSet=overleaf"
SHARELATEX_MONGO_URL="mongodb://127.0.0.1:27017/sharelatex?replicaSet=overleaf"

# Redis (automatically configured for internal use)
REDIS_HOST="127.0.0.1"
REDIS_PORT="6379"
SHARELATEX_REDIS_HOST="127.0.0.1" 
SHARELATEX_REDIS_PORT="6379"

# ===========================================
# OVERLEAF FEATURE CONFIGURATION
# ===========================================
# Enable file type linking
ENABLED_LINKED_FILE_TYPES="project_file,project_output_file"

# Enable image conversions using ImageMagick
ENABLE_CONVERSIONS="true"

# Disable email confirmation for easier setup
EMAIL_CONFIRMATION_DISABLED="true"

# Enable project history
OVERLEAF_HISTORY_ENABLED="true"

# ===========================================
# SECURITY AND AUTHENTICATION  
# ===========================================
# Session settings
SHARELATEX_SECURE_COOKIE="false"
SHARELATEX_SESSION_SECRET="overleaf-session-secret-change-this-in-production"

# CORS settings
SHARELATEX_CORS_ORIGIN="*"

# ===========================================
# EMAIL CONFIGURATION (Optional)
# ===========================================
# Uncomment and configure for email functionality
# SHARELATEX_EMAIL_FROM_ADDRESS="noreply@yourdomain.com"
# SHARELATEX_EMAIL_SMTP_HOST="smtp.gmail.com"
# SHARELATEX_EMAIL_SMTP_PORT="587"
# SHARELATEX_EMAIL_SMTP_SECURE="false"
# SHARELATEX_EMAIL_SMTP_USER="your-email@gmail.com"
# SHARELATEX_EMAIL_SMTP_PASS="your-app-password"
# SHARELATEX_EMAIL_SMTP_TLS_REJECT_UNAUTH="true"

# ===========================================
# ADVANCED SETTINGS
# ===========================================
# File upload limits
SHARELATEX_MAX_UPLOAD_SIZE="50mb"

# Compile timeout (in milliseconds)
SHARELATEX_COMPILE_TIMEOUT="60000"

# Performance settings
SHARELATEX_COMPILE_DIR="/var/lib/overleaf/tmp"
SHARELATEX_CACHE_DIR="/var/lib/overleaf/cache"

# LaTeX settings
SHARELATEX_TEX_LIVE_IMAGE_NAME="quay.io/sharelatex/texlive-full:2023.1"

# ===========================================
# LOGGING CONFIGURATION
# ===========================================
SHARELATEX_LOG_LEVEL="info"

# ===========================================
# DATA PERSISTENCE PATHS
# ===========================================
# These are internal paths - do not change unless you know what you're doing
SHARELATEX_DATA_PATH="/var/lib/overleaf"
MONGO_DATA_PATH="/data/mongo"
REDIS_DATA_PATH="/data/redis"

# ===========================================
# HEALTH CHECK CONFIGURATION
# ===========================================
HEALTH_CHECK_PORT="3000"